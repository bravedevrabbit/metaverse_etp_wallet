<ion-header>
    <ion-navbar>
        <ion-title>{{"D2FA_SCAN"|translate}}</ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>

    <form #connectForm="ngForm" no-lines>

        <ion-item *ngIf="!isApp" [ngClass]="{'error-border':!validD2faMessage(message), 'valid-border': message.length > 0 && validD2faMessage(message)}">
            <ion-label floating>{{"D2FA_SCAN.INPUT_LABEL" | translate}}</ion-label>
            <ion-input name="message" [(ngModel)]="message"></ion-input>
        </ion-item>

        <div *ngIf="isApp">
            <div *ngIf="!qrCodeLoaded">
                <ion-item class="center-text" no-lines>
                    <h3>{{"IMPORT.SCAN_QRCODE_TEXT"|translate}}</h3>
                </ion-item>
                <ion-row>
                    <button ion-button full icon-left class="large-btn" id="open-wallet-button" color="secondary" (click)="scan()">
                        <ion-icon name="qr-scanner"></ion-icon>
                        {{"IMPORT.SCAN_QRCODE_BUTTON"|translate}}
                    </button>
                </ion-row>
            </div>

            <div *ngIf="qrCodeLoaded">
                <ion-row>
                    <ion-icon name="md-checkmark-circle" class="verifiedQRCode"></ion-icon>
                </ion-row>
                <ion-row>
                    <ion-item class="center-psw">
                        <ion-label color="primary" floating>{{"PASSWORD" | translate}}</ion-label>
                        <ion-input name="password" type="password" [(ngModel)]="password" required></ion-input>
                    </ion-item>
                </ion-row>
                <br>
                <ion-row>
                    <button ion-button full [disabled]="!passwordValid(password)" (click)="decrypt(password,seed)" color="primary">
                        {{"IMPORT_WALLET" | translate}}
                    </button>
                </ion-row>
            </div>
        </div>

        <ion-item [ngClass]="{'error-border': !validPassword(passphrase)}">
            <ion-label color="primary" floating>{{"PASSWORD" | translate}}</ion-label>
            <ion-input name="passphrase" type="password" [(ngModel)]="passphrase" required></ion-input>
        </ion-item>
        <br>

        <ion-row class="padding-bottom">
            <ion-col>
                <button ion-button full [disabled]="!connectForm.form.valid||!validD2faMessage(message)" (click)="check(message, passphrase)" icon-left color="secondary">
                    <ion-icon disabled="!validD2faMessage(message)" name="cog"></ion-icon>
                    {{'CHECK'|translate}}
                </button>
            </ion-col>
            <ion-col>
                <button ion-button color="danger" full item-right icon-left (click)="cancel($event)">
                    <ion-icon name="close"></ion-icon>
                    {{'CANCEL'|translate}}
                </button>
            </ion-col>
        </ion-row>

    </form>

    <form #connectMobileForm="ngForm" *ngIf="isApp" no-lines>


    </form>

</ion-content>